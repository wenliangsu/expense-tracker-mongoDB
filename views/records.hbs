<section class="container mt-5" style="width: 40%;">
  {{> messages}}
  {{!-- select category --}}
  <div class="col-8 mx-auto">
    <form action="/">
      <select class="form-select col-12" name="categorySelector" id="categorySelector" onchange="this.form.submit()">
        <option value="">類別</option>
        {{#each categories}}
        <option value="{{this._id}}" name="category" {{this.selected}}>{{this.name}}</option>
        {{/each}}
      </select>
    </form>
  </div>


  {{!-- data panel --}}
  {{!-- total amount --}}
  <div class="mt-3 d-flex justify-content-around my-2">
    <p style=" font-size: 20px; width: 80px;" name="totalAmount" id="totalAmount">總金額：</p>
    <p style="font-size: 80px; font-weight:bold; color: orange;">{{totalAmount}}</p>
  </div>

  {{!-- Expense list--}}
  <ul class="list-group">
    {{#each records}}
    <div class="col-8 d-flex align-items-center p-2">
      <i class="{{this.categoryId.icon}} fa-xl text-danger" style="width: 20px;" name="icon" id="icon"></i>
      <div class="d-inline px-3 col-8" name="category" id="category">
        <h5>{{this.name}}</h5>
        <small class="date">{{this.date}}</small>
      </div>
      <div class="item-amount d-inline col-2" name="amount" id="amount">
        <h5>{{this.amount}}</h5>
      </div>

      {{!-- edit and delete button--}}
      <div class="edit-del d-inline px-1 col-7 text-end">
        <a class="btn btn-success" href="./records/{{this._id}}/edit" name="edit" id="edit">修改</a>
        <form action="/records/{{this._id}}?_method=DELETE" style="display: inline" method="POST">
          <button class="btn btn-md btn-dark" style="display: inline" type="submit" name="delete" id="delete"
            onclick="return confirm('Are you want to delete {{this.name}}')">刪除</button>
        </form>
      </div>
    </div>
    </li>
    {{/each}}
  </ul>
  {{!-- create button --}}
  <div class="d-flex justify-content-center mt-5">
    <a href="/records/create"><button class="btn btn-secondary mb-3" name="new-expense">新增支出</button></a>
  </div>
</section>